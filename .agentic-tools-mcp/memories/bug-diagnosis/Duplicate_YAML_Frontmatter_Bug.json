{
  "id": "d5d92609-07f0-4477-9e9b-b12f0ec31776",
  "title": "Duplicate YAML Frontmatter Bug",
  "details": "## Duplicate YAML Frontmatter Issue in Final Markdown Output\n\n**Problem:** The final markdown output contains two YAML frontmatter blocks instead of one:\n1. The proper YAML frontmatter (lines 1-21) built by VideoNoteProcessor\n2. A duplicate YAML block (lines 27-32) generated by the AI containing only tags\n\n**Root Cause:** \n- The `final_summary_prompt.md` instructs the AI to handle YAML frontmatter and add tags\n- Even though the template already contains the full YAML frontmatter via the `[yamlfrontmatter]` placeholder replacement\n- The AI interprets the instruction \"If the frontmatter already has tags, DO NOT MODIFY them\" but still generates a new YAML block for tags\n\n**Current Flow:**\n1. VideoNoteProcessor builds complete YAML frontmatter with metadata\n2. YAML frontmatter passed as `yamlfrontmatter` variable to AISummarizer\n3. Template placeholder `[yamlfrontmatter]` gets replaced with the full YAML block\n4. AI processes the prompt and adds its own YAML block with tags\n\n**Evidence:** \nUser's output file has:\n```yaml\n# First block (correct):\n---\ntitle: Operations Management...\n[all metadata fields]\n---\n\n# Second block (duplicate):\n```yaml\ntags:\n  - \"inventory-management\"\n  - \"economic-order-quantity\"\n  ...\n---\n```\n\n**Impact:** Creates malformed markdown with duplicate YAML sections.",
  "category": "bug-diagnosis",
  "dateCreated": "2025-06-13T22:44:10.400Z",
  "dateUpdated": "2025-06-13T22:44:10.400Z"
}