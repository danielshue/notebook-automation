{
  "id": "07cd865f-702b-4b60-b917-a4e7e7fd9272",
  "title": "NotebookAutomation DI Patterns",
  "details": "## NotebookAutomation C# Dependency Injection Patterns\n\n### VideoNoteProcessor Constructor\n**Correct signature:**\n```csharp\nVideoNoteProcessor(\n    ILogger<VideoNoteProcessor> logger,\n    IAISummarizer aiSummarizer, \n    IYamlHelper yamlHelper,\n    MetadataHierarchyDetector hierarchyDetector,\n    MetadataTemplateManager templateManager,\n    MarkdownNoteBuilder markdownNoteBuilder,\n    IOneDriveService? oneDriveService = null,\n    AppConfig? appConfig = null\n)\n```\n\n### MetadataHierarchyDetector Constructor\n**Correct signature:**\n```csharp\nMetadataHierarchyDetector(ILogger<MetadataHierarchyDetector> logger)\n```\n- No longer has parameterless constructor\n- Cannot be mocked as Mock<MetadataHierarchyDetector>() without parameters\n- Must use new MetadataHierarchyDetector(logger) or mock the interface if available\n\n### MarkdownNoteBuilder Constructor  \n**Correct signature:**\n```csharp\nMarkdownNoteBuilder(IYamlHelper yamlHelper)\n```\n- Takes IYamlHelper, not ILogger\n\n### Test Patterns Fixed\n- Removed all `processor.Logger = mockLogger.Object` assignments (Logger is read-only)\n- Updated all VideoNoteProcessor instantiations to include MarkdownNoteBuilder as 6th parameter\n- Updated all MarkdownNoteBuilder instantiations to use IYamlHelper \n- Updated all MetadataHierarchyDetector instantiations to use constructor with logger\n\n### Remaining Issues (as of latest build)\n- VideoNoteBatchProcessor tests trying to mock VideoNoteProcessor with old constructor\n- VaultIndexProcessorTests trying to mock MetadataHierarchyDetector without constructor parameters\n\n### Status\n- Build: ✅ SUCCESS (only 1 warning)\n- Tests: ❌ 6 test failures related to Mock constructor issues",
  "category": "project_context",
  "dateCreated": "2025-06-09T04:45:12.401Z",
  "dateUpdated": "2025-06-09T04:45:12.401Z"
}