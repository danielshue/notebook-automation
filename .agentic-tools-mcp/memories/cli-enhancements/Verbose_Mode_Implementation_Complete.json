{
  "id": "fb279ae8-9fc1-491f-9bbb-cfc416247a3b",
  "title": "Program.cs Refactoring Strategy - UI Namespace",
  "details": "## ğŸ“‹ Refactoring Proposal for Program.cs (Updated with UI namespace)\n\nThe current `Program.cs` file has grown to **677 lines** and handles multiple responsibilities. Here's the comprehensive refactoring strategy using UI namespace for better organization:\n\n## ğŸ—ï¸ **Proposed Refactoring Structure**\n\n### **1. Keep Program.cs as Thin Orchestrator** (~50-80 lines)\n```csharp\ninternal class Program\n{\n    private static IServiceProvider? serviceProvider;\n    public static IServiceProvider ServiceProvider { get; }\n    public static async Task<int> Main(string[] args)\n    public static async Task<int> ExecuteMainAsync(string[] args)\n}\n```\n\n### **2. Create Specialized Service Classes**\n\n#### **`Startup/ApplicationBootstrapper.cs`** \n*Handles dependency injection and service setup*\n```csharp\ninternal class ApplicationBootstrapper\n{\n    public IServiceProvider SetupDependencyInjection(string? configPath, bool debug)\n    public string GetServiceSetupFriendlyMessage(Exception exception)\n}\n```\n\n#### **`Cli/CommandLineBuilder.cs`**\n*Handles command line setup and registration*\n```csharp\ninternal class CommandLineBuilder\n{\n    public RootCommand CreateRootCommand()\n    public CommandLineOptions CreateGlobalOptions()\n    public void RegisterCommands(RootCommand rootCommand, IServiceProvider serviceProvider)\n    public Parser BuildParser(RootCommand rootCommand)\n}\n```\n\n#### **`UI/HelpDisplayService.cs`** â­ UPDATED\n*Handles all help display logic*\n```csharp\ninternal class HelpDisplayService\n{\n    public async Task DisplayCustomHelpAsync(RootCommand rootCommand, string? configPath, bool isDebug, string[] args)\n    public void ShowVersionInfo()\n}\n```\n\n#### **`UI/EnvironmentDisplayService.cs`** â­ UPDATED\n*Handles environment and configuration display*\n```csharp\ninternal class EnvironmentDisplayService\n{\n    public async Task DisplayEnvironmentSettingsAsync(string? configPath, bool isDebug, string[] args)\n    public async Task DisplayConfigurationSettingsAsync(string configPath)\n}\n```\n\n#### **`Configuration/ConfigurationDiscoveryService.cs`**\n*Handles configuration file discovery*\n```csharp\ninternal class ConfigurationDiscoveryService\n{\n    public async Task<string?> DiscoverConfigurationForDisplayAsync(string? explicitConfigPath)\n    public string? ParseConfigPathFromArgs(string[] args)\n}\n```\n\n#### **`Utilities/CommandLineModeDetector.cs`**\n*Handles debug/verbose mode detection*\n```csharp\ninternal static class CommandLineModeDetector\n{\n    public static bool IsDebugModeEnabled(string[] args)\n    public static bool IsVerboseModeEnabled(string[] args)\n    public static CommandLineFlags DetectFlags(string[] args)\n}\n```\n\n## ğŸ“ **Updated Directory Structure**\n```\nNotebookAutomation.Cli/\nâ”œâ”€â”€ Program.cs                          # Thin orchestrator (50-80 lines)\nâ”œâ”€â”€ Startup/\nâ”‚   â””â”€â”€ ApplicationBootstrapper.cs      # DI and service setup\nâ”œâ”€â”€ Cli/\nâ”‚   â””â”€â”€ CommandLineBuilder.cs           # Command line setup\nâ”œâ”€â”€ UI/                                 # â­ UPDATED: User Interface concerns\nâ”‚   â”œâ”€â”€ HelpDisplayService.cs           # Help display\nâ”‚   â””â”€â”€ EnvironmentDisplayService.cs    # Environment display\nâ”œâ”€â”€ Configuration/\nâ”‚   â””â”€â”€ ConfigurationDiscoveryService.cs # Config discovery\nâ”œâ”€â”€ Utilities/\nâ”‚   â””â”€â”€ CommandLineModeDetector.cs      # Mode detection helpers\nâ”œâ”€â”€ Models/\nâ”‚   â””â”€â”€ CommandLineOptions.cs          # Data structures\nâ””â”€â”€ Commands/                           # Existing command classes\n    â”œâ”€â”€ TagCommands.cs\n    â”œâ”€â”€ VaultCommands.cs\n    â””â”€â”€ ...\n```\n\n## ğŸ”§ **Benefits of UI Namespace**\n- **More concise** - \"UI\" vs \"Display\" is shorter and clearer\n- **Standard convention** - UI is commonly used in .NET applications\n- **Broader scope** - Can include future UI-related services (formatters, themes, etc.)\n- **Better intellisense** - Shorter namespace for better IDE experience\n\n## ğŸš€ **Implementation Priority**\n1. **UI services** - Most complex with formatting and display logic\n2. **Startup services** - Critical for dependency injection\n3. **Configuration services** - Used by UI services\n4. **Utilities** - Helper methods\n5. **Program.cs refactoring** - Final orchestration cleanup\n\nThe UI namespace provides a clean, organized home for all user interface and display-related functionality while keeping the naming convention concise and professional.",
  "category": "cli-enhancements",
  "dateCreated": "2025-06-14T16:02:02.066Z",
  "dateUpdated": "2025-06-14T16:06:01.272Z"
}