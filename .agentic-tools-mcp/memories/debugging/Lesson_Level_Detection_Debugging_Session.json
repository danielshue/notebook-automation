{
  "id": "cc2abb95-18e5-4cb0-88e6-1a5a70ebb03d",
  "title": "Lesson Level Detection Debugging Session",
  "details": "## Lesson Level Detection Debugging Session - UPDATED\n\n### Task Goal\nMove CalculateHierarchyLevel method to MetadataHierarchyDetector for reuse across the application (PDF, Video, Markdown, etc.), update the IMetadataHierarchyDetector interface accordingly, and ensure lesson-level folders are correctly detected and mapped to the \"lesson\" template.\n\n### Current State\n✅ COMPLETED:\n- Removed CalculateHierarchyLevel from VaultIndexBatchProcessor.\n- Added CalculateHierarchyLevel and GetTemplateTypeFromHierarchyLevel to IMetadataHierarchyDetector.\n- Made GetTemplateTypeFromHierarchyLevel an instance method in MetadataHierarchyDetector.\n- Updated VaultIndexBatchProcessor to use the instance method for template type mapping.\n- Removed the duplicate static method from VaultIndexBatchProcessor.\n- Verified all changes compile correctly with dotnet build.\n- **CONFIRMED: VaultIndexBatchProcessor IS using CalculateHierarchyLevel from MetadataHierarchyDetector at line 104**\n\n### Hierarchy Level Mapping\nBased on MetadataHierarchyDetector.GetTemplateTypeFromHierarchyLevel():\n- Level 0: \"main\" (vault root)\n- Level 1: \"program\" \n- Level 2: \"course\"\n- Level 3: \"class\"\n- Level 4: \"module\"\n- Level 5: \"lesson\" ⬅️ TARGET\n- Level 6+: \"unknown\"\n\n### Test Directory Structure\nC:/Users/danshue.REDMOND/Vault/01_Projects/MBA/Value Chain Management/Operations Management/operations-management-organization-and-analysis\n- Config vault root: /c:/users/danshue.REDMOND/Vault/01_Projects/MBA/\n- Path: C:/Users/danshue.REDMOND/Vault/01_Projects/MBA/Value Chain Management/Operations Management/operations-management-organization-and-analysis\n\n### CURRENT ISSUE\nCLI still shows \"No folders found to process\" even after:\n1. Using the centralized CalculateHierarchyLevel method\n2. Rebuilding and republishing the CLI\n3. Testing with correct path and --template-types lesson\n\n### HYPOTHESIS\nThe issue might be:\n1. Path normalization/case sensitivity between config vault root and provided path\n2. The lesson folder hierarchy level calculation not matching expected level 5\n3. VaultIndexBatchProcessor filtering logic removing all directories\n\n### Next Steps\n1. Add debug logging to see what hierarchy levels are being calculated\n2. Check path normalization between config and provided path\n3. Verify template type filtering logic is working correctly\n\n### CLI Test Commands Used\n```\n./na.exe vault generate-index \"C:/Users/danshue.REDMOND/Vault/01_Projects/MBA/Value Chain Management/Operations Management/operations-management-organization-and-analysis\" --template-types lesson --debug\n```\nResult: \"No folders found to process\"",
  "category": "debugging",
  "dateCreated": "2025-06-09T18:24:37.587Z",
  "dateUpdated": "2025-06-09T18:40:24.590Z"
}