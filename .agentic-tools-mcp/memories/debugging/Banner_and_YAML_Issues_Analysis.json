{
  "id": "1df68804-1b30-484d-b37b-558f0964a4a2",
  "title": "Banner and YAML Issues Analysis",
  "details": "Analysis of three key issues in the markdown note generation:\n\n## 1. Banner Issue: Why gies-banner.png appears ✅ IDENTIFIED but NOT FIXED\nSource: MarkdownNoteBuilder.cs line 40 and line 65-67\n- CreateMarkdownWithFrontmatter always adds: frontmatter[\"banner\"] = \"gies-banner.png\"\n- BuildNote only adds banner if not already present: if (!frontmatter.ContainsKey(\"banner\"))\n- Need to modify the banner logic to be conditional based on content type\n- AI-generated content with auto-generated-state=\"writable\" should not get banners\n- Video/PDF reference types should not get banners\n\n## 2. Extra YAML after title ✅ FIXED\nSource: final_summary_prompt.md structure\n- The prompt template had [yamlfrontmatter] placeholder AFTER the \"---\" section\n- This caused the AI to include YAML in the markdown body rather than frontmatter\n- Template structure shows [yamlfrontmatter] between two \"---\" sections\n- FIXED: Moved [yamlfrontmatter] to be directly between the --- markers\n\n## 3. LaTeX formatting instruction ✅ FIXED\nCurrent instruction (line 25): \"You will return markdown which may have LaTex. Be sure to around that LaTex with $$ it should be on a sigle line or if its inline, then include $ at the beginning and $ at the end.\"\n- Had typos: \"LaTex\" should be \"LaTeX\", \"sigle\" should be \"single\", \"around that\" should be \"surround that\"\n- Not specific enough about when to use $ vs $$\n- FIXED: Rewrote with clear instructions for inline ($) vs display ($$) formulas\n\n## 4. YAML Content Generation\nVideoNoteProcessor.BuildYamlFrontmatter does NOT include banner by default - it's added later by MarkdownNoteBuilder\n\n## Next Steps:\n- Test the prompt template and LaTeX fixes\n- Fix the banner logic in MarkdownNoteBuilder (need careful approach to avoid breaking code structure)\n- Validate end-to-end markdown generation",
  "category": "debugging",
  "dateCreated": "2025-06-13T18:45:46.386Z",
  "dateUpdated": "2025-06-13T18:50:33.321Z"
}