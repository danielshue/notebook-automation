{
  "id": "3ceb6972-ab02-478a-ac10-b0c922670344",
  "title": "Template-Type vs Index-Type Field Inconsistency",
  "details": "## Problem Description\n\nThere's an inconsistency between two metadata fields used in Obsidian vault index files:\n\n### Current State:\n1. **template-type**: Uses \"-index\" suffix format (e.g., \"program-index\", \"course-index\", \"class-index\")\n2. **index-type**: Uses plain format (e.g., \"program\", \"course\", \"class\") \n\n### Examples from vault:\n- XYZ Program.md: template-type: \"program-index\", index-type: \"class\" (INCONSISTENT!)\n- Value Program.md: template-type: \"course-index\", index-type: \"class\" (INCONSISTENT!)\n- Supply-Chain.md: template-type: \"class-index\", index-type: \"module\" (INCONSISTENT!)\n\n### Code Analysis:\n1. **MetadataEnsureProcessor.DetermineIndexTypeFromHierarchy()**: Sets index-type using plain format based on directory depth\n2. **MetadataEnsureProcessor.EnsureTemplateType()**: Sets template-type using filename patterns, often with \"-index\" suffix\n3. **MetadataHierarchyDetector.UpdateMetadataWithHierarchy()**: Accepts both plain and \"-index\" formats for hierarchy logic\n\n### Issues:\n1. **Conflicting Values**: Same file has different representations of the same concept\n2. **Confusion**: Two fields representing similar concepts with different naming conventions\n3. **Maintenance**: Inconsistency makes it hard to determine which field is authoritative\n\n### Recommended Solution:\n1. **Standardize on index-type**: Use index-type as the primary field for hierarchy processing\n2. **Consistent Format**: Use plain format consistently (e.g., \"program\", \"course\", \"class\")\n3. **Template-type Purpose**: Keep template-type for template selection, sync with index-type for index files\n4. **Validation**: Add logic to detect and resolve conflicts between the two fields\n5. **Backward Compatibility**: Support reading both formats but write consistently\n\n### Implementation Plan:\n1. Update ensure-metadata logic to synchronize template-type and index-type for index files\n2. Add validation/warning for conflicting values\n3. Standardize on plain format for both fields when they represent the same concept\n4. Update tests to cover these scenarios",
  "category": "bug-analysis",
  "dateCreated": "2025-06-07T03:10:13.453Z",
  "dateUpdated": "2025-06-07T03:10:13.453Z"
}